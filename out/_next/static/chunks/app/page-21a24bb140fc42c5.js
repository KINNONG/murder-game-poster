(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{437:(e,t,s)=>{Promise.resolve().then(s.bind(s,3009))},3009:(e,t,s)=>{"use strict";s.d(t,{default:()=>L});var a=s(5155),l=s(2115),r=s(9708),i=s(2085),n=s(2596),o=s(9688);function c(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,o.QP)((0,n.$)(t))}function d(e){if(e.startsWith("http")||e.startsWith("data:"))return e;let t=e.startsWith("/")?e:"/".concat(e);return"/".concat("murder-game-poster").concat(t)}let x=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function m(e){let{className:t,variant:s,size:l,asChild:i=!1,...n}=e,o=i?r.DX:"button";return(0,a.jsx)(o,{"data-slot":"button",className:c(x({variant:s,size:l,className:t})),...n})}var u=s(2177),h=s(968);function p(e){let{className:t,...s}=e;return(0,a.jsx)(h.b,{"data-slot":"label",className:c("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...s})}let f=u.Op,g=l.createContext({}),b=e=>{let{...t}=e;return(0,a.jsx)(g.Provider,{value:{name:t.name},children:(0,a.jsx)(u.xI,{...t})})},v=()=>{let e=l.useContext(g),t=l.useContext(j),{getFieldState:s}=(0,u.xW)(),a=(0,u.lN)({name:e.name}),r=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...r}},j=l.createContext({});function N(e){let{className:t,...s}=e,r=l.useId();return(0,a.jsx)(j.Provider,{value:{id:r},children:(0,a.jsx)("div",{"data-slot":"form-item",className:c("grid gap-2",t),...s})})}function w(e){let{className:t,...s}=e,{error:l,formItemId:r}=v();return(0,a.jsx)(p,{"data-slot":"form-label","data-error":!!l,className:c("data-[error=true]:text-destructive",t),htmlFor:r,...s})}function y(e){let{...t}=e,{error:s,formItemId:l,formDescriptionId:i,formMessageId:n}=v();return(0,a.jsx)(r.DX,{"data-slot":"form-control",id:l,"aria-describedby":s?"".concat(i," ").concat(n):"".concat(i),"aria-invalid":!!s,...t})}function k(e){var t;let{className:s,...l}=e,{error:r,formMessageId:i}=v(),n=r?String(null!=(t=null==r?void 0:r.message)?t:""):l.children;return n?(0,a.jsx)("p",{"data-slot":"form-message",id:i,className:c("text-destructive text-sm",s),...l,children:n}):null}function z(e){let{className:t,type:s,...l}=e;return(0,a.jsx)("input",{type:s,"data-slot":"input",className:c("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...l})}var C=s(8124);let S=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(C.bL,{className:c("grid gap-2",s),...l,ref:t})});S.displayName=C.bL.displayName;let I=l.forwardRef((e,t)=>{let{className:s,...l}=e;return(0,a.jsx)(C.q7,{ref:t,className:c("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...l,children:(0,a.jsx)(C.C1,{className:"flex items-center justify-center",children:(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-current"})})})});function V(e){let{className:t,...s}=e;return(0,a.jsx)("textarea",{"data-slot":"textarea",className:c("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...s})}I.displayName=C.q7.displayName;var _=s(5594);let F=_.z.object({title:_.z.string().min(1,{message:"请输入剧本名称"}).max(50,{message:"剧本名称不能超过50个字符"}),type:_.z.string().min(1,{message:"请输入剧本类型"}).max(30,{message:"剧本类型不能超过30个字符"}),description:_.z.string().min(10,{message:"主要剧情至少需要10个字符"}).max(500,{message:"主要剧情不能超过500个字符"}),info:_.z.string().min(5,{message:"基本配置信息至少需要5个字符"}).max(200,{message:"基本配置信息不能超过200个字符"}),review:_.z.string().min(10,{message:"六楼测评至少需要10个字符"}).max(300,{message:"六楼测评不能超过300个字符"}),coverImage:_.z.string().nullable(),introImage:_.z.string().nullable(),templateType:_.z.enum(["vintage","modern","detective"],{required_error:"请选择海报模板类型"})});var E=s(221),R=s(6671);function D(e){let{posterData:t,onUpdatePoster:s}=e,r=(0,u.mN)({resolver:(0,E.u)(F),defaultValues:t,mode:"onChange"}),i=(0,l.useCallback)((e,t)=>{var a;let l=null==(a=e.target.files)?void 0:a[0];if(!l)return;if(!l.type.includes("image/"))return void R.oR.error("请上传图片文件");let i=new FileReader;i.onload=e=>{var a;if(null==(a=e.target)?void 0:a.result){let a=e.target.result.toString();r.setValue(t,a),s({...r.getValues(),[t]:a})}},i.readAsDataURL(l)},[r,s]);return(0,a.jsx)(f,{...r,children:(0,a.jsxs)("form",{onSubmit:r.handleSubmit(function(e){s(e),R.oR.success("海报信息已更新")}),className:"space-y-6",children:[(0,a.jsx)(b,{control:r.control,name:"templateType",render:e=>{let{field:t}=e;return(0,a.jsxs)(N,{className:"space-y-3",children:[(0,a.jsx)(w,{children:"海报模板风格"}),(0,a.jsx)(y,{children:(0,a.jsxs)(S,{onValueChange:e=>{t.onChange(e),s({...r.getValues(),templateType:e})},defaultValue:t.value,className:"flex space-x-2",children:[(0,a.jsxs)(N,{className:"flex items-center space-x-1 space-y-0",children:[(0,a.jsx)(y,{children:(0,a.jsx)(I,{value:"vintage"})}),(0,a.jsx)(w,{className:"font-normal cursor-pointer",children:"复古风"})]}),(0,a.jsxs)(N,{className:"flex items-center space-x-1 space-y-0",children:[(0,a.jsx)(y,{children:(0,a.jsx)(I,{value:"detective"})}),(0,a.jsx)(w,{className:"font-normal cursor-pointer",children:"侦探风"})]}),(0,a.jsxs)(N,{className:"flex items-center space-x-1 space-y-0",children:[(0,a.jsx)(y,{children:(0,a.jsx)(I,{value:"modern"})}),(0,a.jsx)(w,{className:"font-normal cursor-pointer",children:"现代风"})]})]})}),(0,a.jsx)(k,{})]})}}),(0,a.jsx)(b,{control:r.control,name:"title",render:e=>{let{field:t}=e;return(0,a.jsxs)(N,{children:[(0,a.jsx)(w,{children:"剧本名称"}),(0,a.jsx)(y,{children:(0,a.jsx)(z,{placeholder:"例如：盒子先生的秘密商店",...t,onChange:e=>{t.onChange(e),s({...r.getValues(),title:e.target.value})}})}),(0,a.jsx)(k,{})]})}}),(0,a.jsx)(b,{control:r.control,name:"type",render:e=>{let{field:t}=e;return(0,a.jsxs)(N,{children:[(0,a.jsx)(w,{children:"剧本类型"}),(0,a.jsx)(y,{children:(0,a.jsx)(z,{placeholder:"例如：猎奇还原惊悚本",...t,onChange:e=>{t.onChange(e),s({...r.getValues(),type:e.target.value})}})}),(0,a.jsx)(k,{})]})}}),(0,a.jsx)(b,{control:r.control,name:"description",render:e=>{let{field:t}=e;return(0,a.jsxs)(N,{children:[(0,a.jsx)(w,{children:"主要剧情"}),(0,a.jsx)(y,{children:(0,a.jsx)(V,{placeholder:"输入剧本的主要剧情描述...",className:"min-h-24",...t,onChange:e=>{t.onChange(e),s({...r.getValues(),description:e.target.value})}})}),(0,a.jsx)(k,{})]})}}),(0,a.jsx)(b,{control:r.control,name:"info",render:e=>{let{field:t}=e;return(0,a.jsxs)(N,{children:[(0,a.jsx)(w,{children:"基本配置信息"}),(0,a.jsx)(y,{children:(0,a.jsx)(V,{placeholder:"人数、难度、时长、类型等信息",...t,onChange:e=>{t.onChange(e),s({...r.getValues(),info:e.target.value})}})}),(0,a.jsx)(k,{})]})}}),(0,a.jsx)(b,{control:r.control,name:"review",render:e=>{let{field:t}=e;return(0,a.jsxs)(N,{children:[(0,a.jsx)(w,{children:"六楼测评"}),(0,a.jsx)(y,{children:(0,a.jsx)(V,{placeholder:"输入剧本的测评内容...",className:"min-h-20",...t,onChange:e=>{t.onChange(e),s({...r.getValues(),review:e.target.value})}})}),(0,a.jsx)(k,{})]})}}),(0,a.jsx)(b,{control:r.control,name:"coverImage",render:e=>{let{field:t}=e;return(0,a.jsxs)(N,{children:[(0,a.jsx)(w,{children:"剧本封面"}),(0,a.jsx)(y,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(z,{type:"file",accept:"image/*",onChange:e=>i(e,"coverImage"),className:"cursor-pointer"}),t.value&&(0,a.jsxs)("div",{className:"relative mt-2 h-full w-full overflow-hidden rounded-md",children:[(0,a.jsx)("img",{src:t.value,alt:"剧本封面预览",className:"h-full w-full object-cover"}),(0,a.jsx)(m,{type:"button",variant:"destructive",size:"sm",className:"absolute right-2 top-2",onClick:()=>{r.setValue("coverImage",null),s({...r.getValues(),coverImage:null})},children:"删除"})]})]})}),(0,a.jsx)(k,{})]})}}),(0,a.jsx)(b,{control:r.control,name:"introImage",render:e=>{let{field:t}=e;return(0,a.jsxs)(N,{children:[(0,a.jsx)(w,{children:"剧本介绍图（横图，比例4:3）"}),(0,a.jsx)(y,{children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(z,{type:"file",accept:"image/*",onChange:e=>i(e,"introImage"),className:"cursor-pointer"}),t.value&&(0,a.jsxs)("div",{className:"relative mt-2 h-full w-full overflow-hidden rounded-md",children:[(0,a.jsx)("img",{src:t.value,alt:"剧本介绍图预览",className:"h-full w-full object-cover"}),(0,a.jsx)(m,{type:"button",variant:"destructive",size:"sm",className:"absolute right-2 top-2",onClick:()=>{r.setValue("introImage",null),s({...r.getValues(),introImage:null})},children:"删除"})]})]})}),(0,a.jsx)(k,{})]})}}),(0,a.jsx)(m,{type:"submit",className:"w-full",children:"更新海报"})]})})}function M(e){let{posterData:t}=e,{templateType:s}=t;return"detective"===s?(0,a.jsx)(W,{posterData:t}):"vintage"===s?(0,a.jsx)(P,{posterData:t}):(0,a.jsx)(q,{posterData:t})}function W(e){let{posterData:t}=e,{title:s,type:l,description:r,info:i,review:n,coverImage:o,introImage:c}=t,x={fontFamily:"'联盟起艺卢帅正锐黑体', 'Source Han Sans SC', 'Noto Sans SC', sans-serif",fontWeight:700};return(0,a.jsxs)("div",{id:"poster-preview",className:"relative w-full aspect-[3/4] overflow-hidden detective-font",children:[(0,a.jsx)("div",{className:"absolute inset-0",children:(0,a.jsx)("img",{src:d("/images/templates/example.jpg"),alt:"背景模板",className:"w-full h-full object-cover"})}),(0,a.jsx)("div",{className:"absolute z-[2] right-48 top-34",style:{transform:"rotate(6deg)"},children:(0,a.jsx)("img",{src:d("/images/templates/PaperClip.png"),alt:"回形针",className:"w-[45px] h-auto"})}),o&&(0,a.jsx)("div",{className:"absolute z-[1] right-27 top-42",style:{transform:"rotate(-4deg)"},children:(0,a.jsx)("img",{src:o,alt:"剧本封面",className:"w-[130px] h-[180px] object-cover opacity-100"})}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-4 absolute top-44 left-20",children:[(0,a.jsx)("div",{className:"inline-block px-6 py-1 mb-3 bg-[#7a1f1f] text-[#fffbd7] font-bold transform skew-x-[-15deg] shadow-[4px_6px_0px_rgba(169,87,66,0.5)]",style:{fontFamily:"'Source Han Sans SC', 'Noto Sans SC', sans-serif"},children:(0,a.jsx)("h1",{className:"text-[28px] md:text-[28px] font-bold transform skew-x-[15deg]",children:s||"剧本名称"})}),(0,a.jsx)("div",{className:"text-[20px] md:text-[20px] text-start ml-4 mt-1 font-medium text-[#6b2026] ",style:x,children:l||"剧本类型"})]}),(0,a.jsxs)("div",{className:" bg-opacity-60 p-4 rounded shadow-sm relative mb-4 top-73 left-10",children:[(0,a.jsx)("div",{children:(0,a.jsx)("p",{style:x,className:"text-sm line-clamp-1 text-[#7a1f1f] w-[480px] tracking-[0.15em]",children:r?r.slice(0,20):"这里是剧本的主要剧情...".slice(0,20)})}),(0,a.jsx)("p",{style:x,className:"text-sm line-clamp-4 text-[#7a1f1f] mt-1 w-[500px] tracking-[0.15em]",children:r?r.slice(20):"这里是剧本的主要剧情...".slice(20)})]}),(0,a.jsx)("div",{className:"absolute p-3 rounded mb-4 top-128 left-18",children:(0,a.jsx)("div",{className:"text-sm text-[#7a1f1f] whitespace-pre-line font-mono tracking-[0.15em]",style:x,children:i||"人数、难度、时长等基本信息..."})}),(0,a.jsx)("div",{className:"absolute top-116 right-23 z-[3]",children:(0,a.jsx)("div",{className:"relative",children:c?(0,a.jsx)("img",{src:c,alt:"剧本介绍图",className:"w-[288px] h-[216px] object-cover shadow-lg",style:{boxShadow:"3px 4px 10px rgba(0,0,0,0.5)"}}):(0,a.jsx)("div",{className:"w-[288px] h-[216px] bg-black bg-opacity-70 flex items-center justify-center shadow-[4px_6px_0px_rgba(169,87,66,0.5)]",children:(0,a.jsx)("span",{className:"text-white text-opacity-50 text-sm",children:"剧本介绍图"})})})}),(0,a.jsx)("div",{className:"absolute top-170 left-20",style:x,children:(0,a.jsx)("div",{className:"relative whitespace-pre-line",children:(0,a.jsx)("p",{className:"text-sm line-clamp-6 text-[#7a1f1f] bg-opacity-60 pt-3 px-3 w-[540px] tracking-[0.15em]",children:n||"剧本测评内容..."})})})]})]})}function P(e){let{posterData:t}=e,{title:s,type:l,description:r,info:i,review:n,coverImage:o,introImage:c}=t,d={fontFamily:"'联盟起艺卢帅正锐黑体', 'Source Han Sans SC', 'Noto Sans SC', sans-serif",fontWeight:700};return(0,a.jsxs)("div",{id:"poster-preview",className:"relative w-full aspect-[3/4] overflow-hidden vintage-font",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-[#752e2e] via-[#4e341f] to-[#3a2a1a]",children:(0,a.jsx)("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:'url(\'data:image/svg+xml,%3Csvg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z" fill="%23ffffff" fill-opacity="0.4" fill-rule="evenodd"/%3E%3C/svg%3E\')'}})}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"bg-[#8c2a2a] text-white py-2 px-4 inline-block transform -rotate-2 rounded shadow-lg",children:(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold tracking-wider",children:s||"剧本名称"})}),(0,a.jsx)("div",{className:"mt-2 text-lg md:text-xl font-medium text-white",children:l||"剧本类型"})]}),(0,a.jsxs)("div",{className:"bg-black bg-opacity-60 p-4 rounded shadow-sm mb-4 border border-[#b2a181]",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-2 border-b border-[#b2a181] pb-1",children:"主要剧情"}),(0,a.jsx)("p",{className:"text-sm text-white line-clamp-4",style:d,children:r||"这里是剧本的主要剧情..."})]}),(0,a.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"bg-black bg-opacity-60 p-3 rounded border-2 border-double border-[#a09173] flex-1",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"基本信息"}),(0,a.jsx)("div",{className:"text-sm text-white whitespace-pre-line font-mono",children:i||"人数、难度、时长等基本信息..."})]}),(0,a.jsxs)("div",{className:"relative w-[180px] h-[135px] transform rotate-2",children:[(0,a.jsx)("div",{className:"absolute inset-0 border-4 border-[#a09173] opacity-60"}),c?(0,a.jsx)("img",{src:c,alt:"剧本介绍图",className:"w-full h-full object-cover",style:{boxShadow:"3px 4px 8px rgba(0,0,0,0.6)"}}):(0,a.jsx)("div",{className:"w-full h-full bg-black bg-opacity-80 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-[#a09173] text-opacity-70 text-xs",children:"剧本介绍图"})}),(0,a.jsx)("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-[#8c2a2a] transform rotate-45"})]})]}),(0,a.jsxs)("div",{className:"mt-auto",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-white mb-2",children:"六楼测评"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("p",{className:"text-sm text-white italic bg-black bg-opacity-60 p-3 border-l-4 border-[#8c2a2a]",style:d,children:n||"剧本测评内容..."}),o&&(0,a.jsx)("div",{className:"absolute -top-16 -right-2 w-[100px] h-[130px] transform -rotate-6 shadow-xl",children:(0,a.jsx)("img",{src:o,alt:"剧本封面",className:"w-full h-full object-cover border-4 border-[#a09173]"})}),(0,a.jsx)("div",{className:"absolute -bottom-4 -right-4 w-20 h-20 opacity-60",children:(0,a.jsx)("div",{className:"w-full h-full rounded-full border-4 border-[#8c2a2a] flex items-center justify-center transform rotate-15",children:(0,a.jsx)("span",{className:"text-[#8c2a2a] text-sm font-bold bg-white bg-opacity-80 px-2 py-1 rounded-full",children:"六楼推荐"})})})]})]}),(0,a.jsx)("div",{className:"absolute bottom-3 right-3 text-xs text-white",children:"剧本杀海报生成工具"})]})]})}function q(e){let{posterData:t}=e,{title:s,type:l,description:r,info:i,review:n,coverImage:o,introImage:c}=t,d={fontFamily:"'联盟起艺卢帅正锐黑体', 'Source Han Sans SC', 'Noto Sans SC', sans-serif",fontWeight:700};return(0,a.jsxs)("div",{id:"poster-preview",className:"relative w-full aspect-[3/4] overflow-hidden modern-font",children:[(0,a.jsxs)("div",{className:"absolute inset-0 bg-gradient-to-tr from-[#1a1a2e] via-[#16213e] to-[#0f3460]",children:[(0,a.jsxs)("div",{className:"absolute inset-0 opacity-10",children:[(0,a.jsx)("div",{className:"absolute w-64 h-64 rounded-full bg-purple-500 blur-3xl -top-20 -left-20"}),(0,a.jsx)("div",{className:"absolute w-64 h-64 rounded-full bg-blue-500 blur-3xl bottom-20 right-10"}),(0,a.jsx)("div",{className:"absolute w-32 h-32 rounded-full bg-red-500 blur-2xl top-1/3 right-10"})]}),(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black to-transparent opacity-70"})]}),(0,a.jsxs)("div",{className:"relative z-10 flex flex-col h-full p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold tracking-wider text-yellow-300 mb-2",children:s||"剧本名称"}),(0,a.jsx)("div",{className:"text-lg md:text-xl font-medium text-red-400",children:l||"剧本类型"})]}),(0,a.jsxs)("div",{className:"mb-4 bg-black bg-opacity-50 p-4 rounded-md",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-purple-300 mb-2",children:"剧情介绍"}),(0,a.jsx)("p",{className:"text-sm text-white line-clamp-4",style:d,children:r||"这里是剧本的主要剧情..."})]}),(0,a.jsxs)("div",{className:"mb-4 flex gap-4",children:[(0,a.jsxs)("div",{className:"flex-1 bg-black bg-opacity-50 p-4 rounded-md",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-purple-300 mb-2",children:"基本信息"}),(0,a.jsx)("div",{className:"text-sm text-white whitespace-pre-line",children:i||"人数、难度、时长等基本信息..."})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 w-[180px]",children:[o&&(0,a.jsx)("div",{className:"h-[110px] overflow-hidden rounded-md border border-purple-500",children:(0,a.jsx)("img",{src:o,alt:"剧本封面",className:"w-full h-full object-cover",style:{boxShadow:"0px 3px 8px rgba(0,0,0,0.5)"}})}),(0,a.jsx)("div",{className:"h-[110px] overflow-hidden rounded-md border border-yellow-500",children:c?(0,a.jsx)("img",{src:c,alt:"剧本介绍图",className:"w-full h-full object-cover",style:{boxShadow:"0px 3px 8px rgba(0,0,0,0.5)"}}):(0,a.jsx)("div",{className:"w-full h-full bg-black bg-opacity-60 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-yellow-500 text-opacity-70 text-xs",children:"剧本介绍图"})})})]})]}),(0,a.jsxs)("div",{className:"mt-auto bg-black bg-opacity-50 p-4 rounded-md",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-purple-300 mb-2",children:"六楼测评"}),(0,a.jsx)("p",{className:"text-sm text-white italic line-clamp-3",style:d,children:n||"剧本测评内容..."})]}),(0,a.jsx)("div",{className:"absolute bottom-3 right-3 text-xs text-white",children:"剧本杀海报生成工具"})]})]})}let H={title:"盒子先生的秘密商店",type:"猎奇还原惊悚本",description:"你们好，我是这家店铺的老板，可以叫我盒子先生。这些货架上的秘密盲盒，都是其他客人留下来的秘密。所以，我不会收取任何的费用，只接受用秘密交换秘密。老板的声音被闷在黑色盒子里，仍旧是掩不住兴奋与激动，似乎很期待我们能够与他达成交易。奇怪的店铺，奇怪的老板，总能勾起人们的好奇心….",info:"人数:4 男 3 女/可反串\n难度:适中\n时长:4 小时左右\n类型:猎奇、还原、惊悚",review:'货架上摆满的不是商品，而是人们的秘密!这听起来是不是既刺激又神秘?说到角色，这里可没那些纯爱戏码，全是些"重口味"的小伙伴。猎奇、变态、血腥、压抑，还有那种阴暗里爬行的感觉，哈哈简直就是为咱们这些"精神稳定"的朋友量身定制的!推理部分轻松不烧脑，时间也刚刚好，不会让你觉得累。而且，最绝的是，你居然',coverImage:null,introImage:null,templateType:"detective"};var T=s(8064);function L(){let[e,t]=(0,l.useState)(H),[s,r]=(0,l.useState)(!1),i=async()=>{let t=document.getElementById("poster-preview");if(!t)return void R.oR.error("找不到海报预览元素");try{r(!0);let s=await T.$E(t,{quality:.95,pixelRatio:2}),a=document.createElement("a");a.download="".concat(e.title,"-剧本杀海报.png"),a.href=s,a.click(),R.oR.success("海报导出成功！")}catch(e){console.error("导出失败:",e),R.oR.error("导出失败，请重试")}finally{r(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 items-start",children:[(0,a.jsx)("div",{className:"w-full lg:w-5/12 bg-white p-6 rounded-lg shadow-sm",children:(0,a.jsx)(D,{posterData:e,onUpdatePoster:e=>{t(e)}})}),(0,a.jsxs)("div",{className:"w-full lg:w-7/12 sticky top-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"预览"}),(0,a.jsx)(m,{onClick:i,disabled:s,children:s?"导出中...":"导出海报"})]}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:(0,a.jsx)(M,{posterData:e})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[671,347,441,684,358],()=>t(437)),_N_E=e.O()}]);